# Requirements Document

## Introduction

The Wedding Venue Recommendation Tool is an AI-driven system that streamlines venue discovery and inquiry for couples planning their wedding. The system eliminates traditional friction points by allowing couples to describe their wedding vision and receive curated venue matches without account creation, lengthy forms, or manual venue outreach. The tool leverages AI to match preferences against a venue database and automatically generates professional booking briefs sent directly to venues.

## Glossary

- **Couple**: The primary users discovering and inquiring about wedding venues
- **System**: The complete wedding venue recommendation platform including frontend, backend workflows, database, and AI components
- **AI_Agent**: The Google Gemini-powered component that processes couple inputs and ranks venues
- **Session**: A temporary, UUID-based identifier stored in the browser that persists couple preferences without requiring authentication
- **Venue**: A wedding location stored in the database with attributes including capacity, pricing, location, style, and amenities
- **Booking_Brief**: A structured, professional email template auto-generated from couple preferences and sent to venues
- **Match_Score**: A numerical ranking produced by the AI_Agent indicating venue-preference alignment
- **Match_Reasoning**: Plain-language explanation generated by the AI_Agent describing why a venue fits the couple's preferences
- **n8n_Workflow**: The backend workflow engine handling business logic, AI orchestration, and integrations
- **Preference_Set**: The collection of couple inputs including dates, guest count, budget, style, location, and optional inspiration images
- **Candidate_Venue**: A venue that passes hard filters (capacity, budget, location) and is eligible for AI ranking

## Requirements

### Requirement 1: Landing Page and Value Communication

**User Story:** As a couple, I want to immediately understand what the tool offers when I arrive at the site, so that I can decide whether to proceed with my venue search.

#### Acceptance Criteria

1. WHEN a couple visits the landing page, THE System SHALL display a clear value proposition describing the AI-driven venue matching service
2. WHEN the landing page loads, THE System SHALL present a prominent call-to-action button to begin the venue search process
3. THE System SHALL communicate that no account creation or login is required
4. WHEN displaying the landing page, THE System SHALL render correctly on mobile viewports with minimum width of 320px

### Requirement 2: Preference Capture Flow

**User Story:** As a couple, I want to provide my wedding preferences through a guided, conversational flow, so that I can describe my vision without filling out a traditional lengthy form.

#### Acceptance Criteria

1. WHEN a couple initiates the preference capture flow, THE System SHALL present input fields in a stepped sequence rather than a single long form
2. WHEN capturing date preferences, THE System SHALL accept either a specific date or a date range
3. WHEN capturing guest count, THE System SHALL accept a numerical value representing expected attendees
4. WHEN capturing budget, THE System SHALL present a range selector with predefined brackets
5. WHEN capturing style preferences, THE System SHALL provide dropdown options combined with a free-text field for additional description
6. WHEN capturing location preferences, THE System SHALL accept geographical input for venue proximity
7. WHERE a couple chooses to upload inspiration images, THE System SHALL accept image file uploads
8. IF an image upload fails, THEN THE System SHALL allow the couple to proceed without the image
9. WHEN displaying preference capture steps, THE System SHALL provide inline validation with clear guidance for invalid or incomplete inputs
10. WHEN the preference capture flow is active, THE System SHALL render all input steps correctly on mobile viewports

### Requirement 3: Session Management

**User Story:** As a couple, I want my preferences and results to persist when I return to the site, so that I don't have to re-enter information during my decision-making process.

#### Acceptance Criteria

1. WHEN a couple begins the preference capture flow, THE System SHALL generate a unique UUID session token
2. WHEN a session token is generated, THE System SHALL store it in the browser using localStorage or cookies
3. WHEN a couple provides preferences, THE System SHALL associate those preferences with the active session token
4. WHEN a couple returns to the site with an active session, THE System SHALL retrieve and display their previously saved preferences and results
5. THE System SHALL maintain session data for a minimum of 7 days from last activity
6. THE System SHALL function without requiring user authentication or account creation

### Requirement 4: Venue Database Query and Filtering

**User Story:** As the System, I want to efficiently filter venues based on hard constraints, so that only viable candidates are sent to the AI for ranking.

#### Acceptance Criteria

1. WHEN the System receives a Preference_Set, THE n8n_Workflow SHALL query the Supabase database for venues
2. WHEN querying venues, THE n8n_Workflow SHALL filter by guest capacity to match the couple's guest count
3. WHEN querying venues, THE n8n_Workflow SHALL filter by price range to match the couple's budget
4. WHEN querying venues, THE n8n_Workflow SHALL filter by location to match the couple's geographical preference
5. WHEN database filtering is complete, THE n8n_Workflow SHALL return only Candidate_Venues that satisfy all hard constraints

### Requirement 5: AI-Powered Venue Matching and Ranking

**User Story:** As a couple, I want the AI to understand my wedding vision and recommend venues that truly match my preferences, so that I can focus on the best options rather than sorting through hundreds of listings.

#### Acceptance Criteria

1. WHEN the n8n_Workflow receives Candidate_Venues, THE System SHALL send the venues and Preference_Set to the Google Gemini API
2. WHEN the AI_Agent processes the request, THE System SHALL receive ranked venues with Match_Scores
3. WHEN the AI_Agent processes the request, THE System SHALL receive Match_Reasoning for each recommended venue
4. WHEN AI ranking is complete, THE System SHALL return the top 1 to 3 venues to the frontend
5. WHEN the AI_Agent generates Match_Reasoning, THE System SHALL provide plain-language explanations describing why each venue fits the couple's preferences
6. IF the n8n_Workflow times out or fails, THEN THE System SHALL return an error response to the frontend

### Requirement 6: Results Display

**User Story:** As a couple, I want to see my recommended venues with clear information and AI-generated reasoning, so that I can understand why each venue matches my vision and make an informed decision.

#### Acceptance Criteria

1. WHEN the System receives ranked venues from the AI_Agent, THE System SHALL display 1 to 3 venue cards
2. WHEN displaying a venue card, THE System SHALL show venue photos from Supabase Storage
3. WHEN displaying a venue card, THE System SHALL show venue name, location, capacity range, and price range
4. WHEN displaying a venue card, THE System SHALL show key features and amenities
5. WHEN displaying a venue card, THE System SHALL show the AI-generated Match_Reasoning
6. WHEN displaying venue cards, THE System SHALL provide an option to select a venue for detailed view or inquiry
7. WHEN displaying results, THE System SHALL render correctly on mobile viewports
8. IF no Candidate_Venues match the Preference_Set, THEN THE System SHALL display a message suggesting the couple adjust their preferences

### Requirement 7: Booking Brief Generation and Inquiry Submission

**User Story:** As a couple, I want to send a professional inquiry to my chosen venue with one click, so that I can initiate contact without manually drafting emails.

#### Acceptance Criteria

1. WHEN a couple selects a venue, THE System SHALL generate a structured Booking_Brief from the Preference_Set
2. WHEN displaying the Booking_Brief preview, THE System SHALL show all relevant details including dates, guest count, budget, style preferences, and location
3. WHEN a couple clicks "Send Inquiry", THE n8n_Workflow SHALL send the Booking_Brief to the venue's contact email via the Resend API
4. WHEN the inquiry is sent, THE System SHALL log the inquiry in Supabase with session_id, venue_id, brief content, timestamp, and status
5. WHERE a couple provides their own email address, THE System SHALL send a copy of the Booking_Brief to the couple
6. THE Booking_Brief SHALL use a professional, structured email template rather than free-form text
7. IF the email sending fails, THEN THE System SHALL return an error to the frontend with a retry option

### Requirement 8: Confirmation and Next Steps

**User Story:** As a couple, I want to see confirmation that my inquiry was sent successfully, so that I know the venue received my information and understand what happens next.

#### Acceptance Criteria

1. WHEN an inquiry is successfully sent, THE System SHALL display a confirmation screen
2. WHEN displaying the confirmation screen, THE System SHALL summarize what was sent, to which venue, and when
3. WHEN displaying the confirmation screen, THE System SHALL provide suggested next steps for the couple
4. WHERE a couple provided their email, THE System SHALL confirm that a copy was sent to their inbox

### Requirement 9: Error Handling and User Feedback

**User Story:** As a couple, I want clear, helpful error messages when something goes wrong, so that I understand the issue and know how to proceed.

#### Acceptance Criteria

1. IF no matching venues are found, THEN THE System SHALL display a user-friendly message explaining the situation
2. IF no matching venues are found, THEN THE System SHALL suggest adjusting specific preferences to broaden the search
3. IF the n8n_Workflow webhook times out, THEN THE System SHALL display an error message with a retry option
4. IF an image upload fails, THEN THE System SHALL display a non-blocking error message and allow the couple to proceed
5. WHEN input validation fails, THE System SHALL display inline error messages with clear guidance on how to correct the input
6. THE System SHALL avoid technical jargon in all error messages and use plain language

### Requirement 10: Responsive Mobile-First Design

**User Story:** As a couple browsing on my phone, I want the entire venue search and inquiry process to work seamlessly on my mobile device, so that I can search for venues wherever I am.

#### Acceptance Criteria

1. THE System SHALL render all pages and components correctly on mobile viewports with minimum width of 320px
2. WHEN displaying on mobile devices, THE System SHALL prioritize touch-friendly interface elements with minimum tap target size of 44x44 pixels
3. WHEN displaying images on mobile devices, THE System SHALL optimize image loading for mobile bandwidth
4. WHEN displaying the preference capture flow on mobile, THE System SHALL present one input per screen to minimize scrolling
5. WHEN displaying venue cards on mobile, THE System SHALL stack cards vertically for easy scrolling
6. THE System SHALL load and respond to user interactions within 3 seconds on mobile networks

### Requirement 11: Data Persistence and Logging

**User Story:** As the System, I want to persist all relevant data about sessions, preferences, and inquiries, so that the application can provide continuity and support future analytics.

#### Acceptance Criteria

1. WHEN a Session is created, THE System SHALL store the session token and creation timestamp in Supabase
2. WHEN a Preference_Set is captured, THE System SHALL store all preference data associated with the session_id in Supabase
3. WHEN an inquiry is sent, THE System SHALL log the session_id, venue_id, Booking_Brief content, timestamp, and status in Supabase
4. WHEN storing venue data, THE System SHALL maintain venue photos in Supabase Storage
5. WHERE a couple uploads inspiration images, THE System SHALL store those images in Supabase Storage associated with the session_id

### Requirement 12: Integration with External Services

**User Story:** As the System, I want to reliably integrate with external APIs for AI processing and email delivery, so that core functionality operates consistently.

#### Acceptance Criteria

1. WHEN the n8n_Workflow needs AI ranking, THE System SHALL send HTTP requests to the Google Gemini API
2. WHEN the n8n_Workflow needs to send emails, THE System SHALL send HTTP requests to the Resend API
3. WHEN making external API calls, THE System SHALL include appropriate authentication credentials
4. WHEN external API calls fail, THE System SHALL retry up to 3 times with exponential backoff
5. IF external API calls fail after retries, THEN THE System SHALL log the error and return a user-friendly error message to the frontend
